<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yönetim Paneli | Birlik Elektrik</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/admin.css">
    <link rel="icon" href="../img/birlik-logo.jpg" type="image/jpg">
</head>
<body>
    <!-- Ana Container -->
    <div class="admin-container">
        <!-- Sidebar -->
        <aside class="admin-sidebar" id="sidebar">
            <div class="admin-sidebar-header">
                <div class="admin-sidebar-logo">
                    <img src="../img/birlik-logo.jpg" alt="Birlik Elektrik">
                    <h1>Birlik <span>Elektrik</span></h1>
                </div>
                <button class="admin-sidebar-toggle" id="sidebarToggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>

            <div class="admin-sidebar-user">
                <div class="admin-sidebar-avatar" id="userInitials">AY</div>
                <div class="admin-sidebar-userinfo">
                    <h4 class="admin-sidebar-username" id="userName">Admin Yönetici</h4>
                    <p class="admin-sidebar-useremail" id="userEmail">admin@birlikelektrik.com</p>
                </div>
            </div>
            
            <nav class="admin-menu">
                <div class="admin-menu-section">Ana Menü</div>
                <ul>
                    <li class="admin-menu-item">
                        <a href="index.html" class="admin-menu-link active">
                            <i class="fas fa-tachometer-alt admin-menu-icon"></i>
                            <span class="admin-menu-title">Gösterge Paneli</span>
                        </a>
                    </li>
                    <li class="admin-menu-item">
                        <a href="projects.html" class="admin-menu-link">
                            <i class="fas fa-project-diagram admin-menu-icon"></i>
                            <span class="admin-menu-title">Projeler</span>
                        </a>
                    </li>
                    <li class="admin-menu-item">
                        <a href="services.html" class="admin-menu-link">
                            <i class="fas fa-tools admin-menu-icon"></i>
                            <span class="admin-menu-title">Hizmetler</span>
                        </a>
                    </li>
                </ul>
                
                <div class="admin-menu-section">İçerik Yönetimi</div>
                <ul>
                    <li class="admin-menu-item">
                        <a href="pages.html" class="admin-menu-link">
                            <i class="fas fa-file-alt admin-menu-icon"></i>
                            <span class="admin-menu-title">Sayfalar</span>
                    </a>
                </li>
                    <li class="admin-menu-item">
                        <a href="gallery.html" class="admin-menu-link">
                            <i class="fas fa-images admin-menu-icon"></i>
                            <span class="admin-menu-title">Galeri</span>
                    </a>
                </li>
                    <li class="admin-menu-item">
                        <a href="team.html" class="admin-menu-link">
                            <i class="fas fa-users admin-menu-icon"></i>
                            <span class="admin-menu-title">Ekip</span>
                    </a>
                </li>
                </ul>
                
                <div class="admin-menu-section">İletişim</div>
                <ul>
                    <li class="admin-menu-item">
                        <a href="messages.html" class="admin-menu-link">
                            <i class="fas fa-envelope admin-menu-icon"></i>
                            <span class="admin-menu-title">Mesajlar</span>
                            <span class="admin-menu-badge">5</span>
                    </a>
                </li>
                </ul>
                
                <div class="admin-menu-section">Ayarlar</div>
                <ul>
                    <li class="admin-menu-item">
                        <a href="settings.html" class="admin-menu-link">
                            <i class="fas fa-cog admin-menu-icon"></i>
                            <span class="admin-menu-title">Genel Ayarlar</span>
                    </a>
                </li>
                    <li class="admin-menu-item">
                        <a href="users.html" class="admin-menu-link">
                            <i class="fas fa-user-shield admin-menu-icon"></i>
                            <span class="admin-menu-title">Kullanıcılar</span>
                    </a>
                </li>
                    <li class="admin-menu-item">
                        <a href="#" id="logoutBtn" class="admin-menu-link">
                            <i class="fas fa-sign-out-alt admin-menu-icon"></i>
                            <span class="admin-menu-title">Çıkış Yap</span>
                    </a>
                </li>
            </ul>
            </nav>
    </aside>

        <!-- İçerik Sarmalayıcı -->
        <div class="admin-content-wrapper">
            <!-- Header -->
            <header class="admin-header">
                <div class="admin-header-search">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Aramak için yazın...">
                </div>
                
                <div class="admin-header-actions">
                    <button class="admin-header-action" id="darkModeToggle" title="Karanlık/Açık Mod">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button class="admin-header-action" title="Bildirimler">
                        <i class="fas fa-bell"></i>
                        <span class="admin-header-action-badge">3</span>
                    </button>
                    <button class="admin-header-action" title="Mesajlar">
                        <i class="fas fa-envelope"></i>
                        <span class="admin-header-action-badge">5</span>
                    </button>
                    <button class="admin-header-action" id="mobileMenuToggle" title="Menü">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </header>
            
            <!-- Ana İçerik -->
            <main class="admin-content">
                <div class="admin-page-title">
                    <div>
                        <h1>Gösterge Paneli</h1>
                        <div class="admin-breadcrumb">
                            <a href="index.html">Ana Sayfa</a>
                            <span class="admin-breadcrumb-separator">/</span>
                            <span>Gösterge Paneli</span>
                    </div>
                    </div>
                    <button class="btn btn-primary">
                        <i class="fas fa-download"></i> Rapor İndir
                    </button>
                </div>
                
                <!-- İstatistik Kartları -->
                <div class="admin-stats-grid">
                    <div class="admin-stat-card">
                        <div class="admin-stat-icon bg-primary">
                            <i class="fas fa-eye"></i>
                        </div>
                        <div class="admin-stat-content">
                            <div class="admin-stat-value">1,285</div>
                            <p class="admin-stat-label">Toplam Ziyaretçi</p>
                        </div>
                    </div>
                    
                    <div class="admin-stat-card">
                        <div class="admin-stat-icon bg-success">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="admin-stat-content">
                            <div class="admin-stat-value">42%</div>
                            <p class="admin-stat-label">Ziyaretçi Artışı</p>
                        </div>
                    </div>
                    
                    <div class="admin-stat-card">
                        <div class="admin-stat-icon bg-warning">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div class="admin-stat-content">
                            <div class="admin-stat-value">24</div>
                            <p class="admin-stat-label">Yeni Mesaj</p>
                </div>
                    </div>
                    
                    <div class="admin-stat-card">
                        <div class="admin-stat-icon bg-secondary">
                            <i class="fas fa-project-diagram"></i>
                        </div>
                        <div class="admin-stat-content">
                            <div class="admin-stat-value">12</div>
                            <p class="admin-stat-label">Aktif Proje</p>
                        </div>
                    </div>
                </div>
                
                <div class="admin-card">
                    <div class="admin-card-header">
                        <h2 class="admin-card-title">Son İletişim Mesajları</h2>
                        <div class="admin-card-actions">
                            <button class="btn btn-sm btn-light">
                                <i class="fas fa-sync"></i> Yenile
                            </button>
                            <a href="messages.html" class="btn btn-sm btn-primary">
                                <i class="fas fa-envelope"></i> Tümünü Gör
                            </a>
                        </div>
                    </div>
                    <div class="admin-card-body">
                        <div class="admin-table-wrapper">
                <table class="admin-table">
                    <thead>
                        <tr>
                                        <th>İsim</th>
                            <th>E-posta</th>
                                        <th>Konu</th>
                            <th>Tarih</th>
                                        <th>Durum</th>
                                        <th>İşlemler</th>
                        </tr>
                    </thead>
                                <tbody>
                                    <tr>
                                        <td>Ahmet Yılmaz</td>
                                        <td>ahmet@gmail.com</td>
                                        <td>Elektrik Tesisatı Hk.</td>
                                        <td>24.06.2023</td>
                                        <td><span class="badge badge-warning">Bekliyor</span></td>
                                        <td>
                                            <button class="btn btn-sm btn-light btn-icon" title="Görüntüle">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button class="btn btn-sm btn-light btn-icon" title="Yanıtla">
                                                <i class="fas fa-reply"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Mehmet Kaya</td>
                                        <td>mehmet@yahoo.com</td>
                                        <td>Fiyat Teklifi</td>
                                        <td>22.06.2023</td>
                                        <td><span class="badge badge-primary">Yanıtlandı</span></td>
                                        <td>
                                            <button class="btn btn-sm btn-light btn-icon" title="Görüntüle">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button class="btn btn-sm btn-light btn-icon" title="Yanıtla">
                                                <i class="fas fa-reply"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Ayşe Demir</td>
                                        <td>ayse@gmail.com</td>
                                        <td>Aydınlatma Projesi</td>
                                        <td>20.06.2023</td>
                                        <td><span class="badge badge-success">Tamamlandı</span></td>
                                        <td>
                                            <button class="btn btn-sm btn-light btn-icon" title="Görüntüle">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button class="btn btn-sm btn-light btn-icon" title="Yanıtla">
                                                <i class="fas fa-reply"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Zeynep Şahin</td>
                                        <td>zeynep@hotmail.com</td>
                                        <td>Elektrik Arızası</td>
                                        <td>19.06.2023</td>
                                        <td><span class="badge badge-danger">İptal Edildi</span></td>
                                        <td>
                                            <button class="btn btn-sm btn-light btn-icon" title="Görüntüle">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button class="btn btn-sm btn-light btn-icon" title="Yanıtla">
                                                <i class="fas fa-reply"></i>
                                            </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
                    </div>
                </div>
                
                <div class="admin-row">
                    <!-- Son Projeler -->
                    <div class="admin-col admin-col-lg-8">
                        <div class="admin-card">
                            <div class="admin-card-header">
                                <h2 class="admin-card-title">Son Projeler</h2>
                                <div class="admin-card-actions">
                                    <button class="btn btn-sm btn-primary">
                                        <i class="fas fa-plus"></i> Yeni Proje
                                    </button>
                                </div>
                            </div>
                            <div class="admin-card-body">
                                <div class="admin-project-item">
                                    <div class="admin-project-info">
                                        <h3 class="admin-project-title">Fabrika Elektrik Tesisatı</h3>
                                        <p class="admin-project-desc">Osmaniye OSB'deki fabrikanın elektrik tesisatı</p>
                                    </div>
                                    <div class="admin-project-meta">
                                        <span><i class="fas fa-calendar"></i> 10.06.2023 - 15.08.2023</span>
                                        <div class="admin-project-progress">
                                            <div class="progress">
                                                <div class="progress-bar" style="width: 65%"></div>
                                            </div>
                                            <span class="progress-text">65%</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="admin-project-item">
                                    <div class="admin-project-info">
                                        <h3 class="admin-project-title">Aydınlatma Projesi</h3>
                                        <p class="admin-project-desc">Adana Merkez AVM aydınlatma sisteminin yenilenmesi</p>
                                    </div>
                                    <div class="admin-project-meta">
                                        <span><i class="fas fa-calendar"></i> 05.06.2023 - 20.07.2023</span>
                                        <div class="admin-project-progress">
                                            <div class="progress">
                                                <div class="progress-bar" style="width: 35%"></div>
                                            </div>
                                            <span class="progress-text">35%</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="admin-project-item">
                                    <div class="admin-project-info">
                                        <h3 class="admin-project-title">Site Altyapı Kablolaması</h3>
                                        <p class="admin-project-desc">Bahçeşehir Konutları elektrik altyapı ve kablolama</p>
                                    </div>
                                    <div class="admin-project-meta">
                                        <span><i class="fas fa-calendar"></i> 01.06.2023 - 30.09.2023</span>
                                        <div class="admin-project-progress">
                                            <div class="progress">
                                                <div class="progress-bar" style="width: 20%"></div>
                                            </div>
                                            <span class="progress-text">20%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Hızlı Erişim -->
                    <div class="admin-col admin-col-lg-4">
                        <div class="admin-card">
                            <div class="admin-card-header">
                                <h2 class="admin-card-title">Hızlı Erişim</h2>
                            </div>
                            <div class="admin-card-body">
                                <div class="admin-quick-links">
                                    <a href="projects.html" class="admin-quick-link">
                                        <i class="fas fa-plus-circle"></i>
                                        <span>Yeni Proje Ekle</span>
                                    </a>
                                    <a href="services.html" class="admin-quick-link">
                                        <i class="fas fa-tools"></i>
                                        <span>Hizmet Ekle</span>
                                    </a>
                                    <a href="messages.html" class="admin-quick-link">
                                        <i class="fas fa-envelope-open-text"></i>
                                        <span>Mesajları Kontrol Et</span>
                                    </a>
                                    <a href="settings.html" class="admin-quick-link">
                                        <i class="fas fa-cog"></i>
                                        <span>Site Ayarları</span>
                                    </a>
                                </div>
                            </div>
                        </div>
            </div>
        </div>
    </main>
        </div>
    </div>

    <!-- Firebase JS -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    
    <!-- Firebase Config -->
    <script src="../js/firebase/config.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Firebase Auth
            const auth = firebase.auth();
            const firestore = firebase.firestore();
            
            // DOM Elements
            const sidebar = document.getElementById('sidebar');
            const sidebarToggle = document.getElementById('sidebarToggle');
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const logoutBtn = document.getElementById('logoutBtn');
            const userNameElement = document.getElementById('userName');
            const userEmailElement = document.getElementById('userEmail');
            const userInitialsElement = document.getElementById('userInitials');
            const darkModeToggle = document.getElementById('darkModeToggle');
            
            // Kullanıcı tercihi için karanlık/açık mod
            function setDarkMode(isDark) {
                if (isDark) {
                    document.body.classList.add('dark-mode');
                    darkModeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                    localStorage.setItem('darkMode', 'true');
                } else {
                    document.body.classList.remove('dark-mode');
                    darkModeToggle.innerHTML = '<i class="fas fa-moon"></i>';
                    localStorage.setItem('darkMode', 'false');
                }
            }
            
            // Depolanan kullanıcı tercihini kontrol et
            const savedDarkMode = localStorage.getItem('darkMode') === 'true';
            setDarkMode(savedDarkMode);
            
            // Karanlık mod düğmesi
            darkModeToggle.addEventListener('click', function() {
                const isDarkMode = document.body.classList.contains('dark-mode');
                setDarkMode(!isDarkMode);
            });
            
            // Toggle Sidebar
            sidebarToggle.addEventListener('click', function() {
                sidebar.classList.toggle('collapsed');
                
                // İkon değiştir
                    const icon = this.querySelector('i');
                if (sidebar.classList.contains('collapsed')) {
                        icon.classList.remove('fa-bars');
                    icon.classList.add('fa-bars-staggered');
                    } else {
                    icon.classList.remove('fa-bars-staggered');
                        icon.classList.add('fa-bars');
                    }
                });
                
            // Mobile Menu Toggle
            mobileMenuToggle.addEventListener('click', function() {
                sidebar.classList.toggle('show');
            });
            
            // Auth State Changed
            auth.onAuthStateChanged(function(user) {
                if (user) {
                    // User is signed in
                    userEmailElement.textContent = user.email;
                    
                    // Set user name and initials
                    if (user.displayName) {
                        userNameElement.textContent = user.displayName;
                        
                        // Set initials
                        const names = user.displayName.split(' ');
                        if (names.length > 1) {
                            userInitialsElement.textContent = names[0].charAt(0) + names[1].charAt(0);
                        } else {
                            userInitialsElement.textContent = names[0].charAt(0);
                        }
                    } else {
                        userNameElement.textContent = 'Admin Kullanıcı';
                        userInitialsElement.textContent = user.email.charAt(0).toUpperCase();
                    }
                } else {
                    // User is signed out, redirect to login
                    window.location.href = 'login.html';
                }
            });
            
            // Logout
            logoutBtn.addEventListener('click', function(e) {
                e.preventDefault();
                
                auth.signOut().then(function() {
                    // Sign-out successful
                    window.location.href = 'login.html';
                }).catch(function(error) {
                    // An error happened
                    console.error('Çıkış sırasında hata oluştu:', error);
                });
            });
            
            // Aktif menü öğesini takip etme
            function setActiveMenuItem() {
                const currentPage = window.location.pathname.split('/').pop();
                const menuLinks = document.querySelectorAll('.admin-menu-link');
                
                menuLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === currentPage) {
                        link.classList.add('active');
                    }
                });
                
                // Anasayfa için özel durum
                if (currentPage === '' || currentPage === 'index.html') {
                    const homeLink = document.querySelector('a[href="index.html"]');
                    if (homeLink) homeLink.classList.add('active');
                }
            }
            
            // Sayfa yüklendiğinde aktif menüyü işaretle
            setActiveMenuItem();
        });
    </script>

    <style>
        /* Row ve Column Layout */
        .admin-row {
            display: flex;
            flex-wrap: wrap;
            margin-right: -15px;
            margin-left: -15px;
        }
        
        .admin-col {
            position: relative;
            width: 100%;
            padding-right: 15px;
            padding-left: 15px;
        }
        
        @media (min-width: 992px) {
            .admin-col-lg-8 {
                flex: 0 0 66.666667%;
                max-width: 66.666667%;
            }
            
            .admin-col-lg-4 {
                flex: 0 0 33.333333%;
                max-width: 33.333333%;
            }
        }
        
        /* Projeler Listesi */
        .admin-project-item {
            background-color: var(--gray-50);
            border-radius: var(--border-radius);
            padding: var(--spacing-4);
            margin-bottom: var(--spacing-3);
            border: 1px solid var(--gray-200);
        }
        
        .admin-project-title {
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-semibold);
            color: var(--gray-800);
            margin: 0 0 var(--spacing-1);
        }
        
        .admin-project-desc {
            font-size: var(--font-size-sm);
            color: var(--gray-600);
            margin: 0;
        }
        
        .admin-project-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: var(--spacing-3);
            padding-top: var(--spacing-3);
            border-top: 1px solid var(--gray-200);
            font-size: var(--font-size-sm);
            color: var(--gray-600);
        }
        
        .admin-project-meta span {
            display: flex;
            align-items: center;
            gap: var(--spacing-1);
        }
        
        .admin-project-progress {
            flex: 0 0 150px;
        }
        
        .progress {
            height: 8px;
            background-color: var(--gray-200);
            border-radius: var(--border-radius-full);
            overflow: hidden;
            margin-bottom: var(--spacing-1);
        }
        
        .progress-bar {
            height: 100%;
            background-color: var(--primary);
            border-radius: var(--border-radius-full);
        }
        
        .progress-text {
            font-size: var(--font-size-xs);
            color: var(--gray-700);
            font-weight: var(--font-weight-medium);
            text-align: right;
            display: block;
        }
        
        /* Hızlı Erişim */
        .admin-quick-links {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-3);
        }
        
        .admin-quick-link {
            display: flex;
            align-items: center;
            gap: var(--spacing-3);
            padding: var(--spacing-3);
            background-color: var(--gray-50);
            border-radius: var(--border-radius);
            color: var(--gray-700);
            transition: var(--transition-base);
            border: 1px solid var(--gray-200);
        }
        
        .admin-quick-link:hover {
            background-color: var(--primary);
            color: var(--white);
            transform: translateY(-2px);
        }
        
        .admin-quick-link i {
            font-size: var(--font-size-xl);
            width: 24px;
            text-align: center;
        }
        
        /* Dark mode styles */
        .dark-mode .admin-project-item,
        .dark-mode .admin-quick-link {
            background-color: var(--gray-700);
            border-color: var(--gray-600);
        }
        
        .dark-mode .admin-project-meta {
            border-top-color: var(--gray-600);
        }
        
        @media (max-width: 991.98px) {
            .admin-project-meta {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--spacing-2);
            }
            
            .admin-project-progress {
                width: 100%;
                flex: none;
            }
        }
        
        /* Sidebarın taşmaması için stil düzenlemeleri */
        .admin-sidebar {
            overflow-y: hidden; /* scroll olmaması için */
            display: flex;
            flex-direction: column;
        }
        
        .admin-menu {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding-bottom: var(--spacing-5);
        }
        
        .admin-menu-section {
            margin-top: var(--spacing-4);
        }
    </style>
</body>
</html> 